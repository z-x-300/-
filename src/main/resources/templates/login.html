<!--
	作者：ZhangXin
	时间：2020-07-25
	描述：博客登录页面
-->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments::head(~{::title})">
	<title>登录</title>
</head>
	<body>

		<br>
		<br>
		<br>
		<div class="m-container-small m-padded-tb-massive" style="max-width: 30em !important;">
			<div class="ur container">
				<div class="ui middle aligned center aligned grid">
					<div class="column">
						<h2 class="ui teal image header">
           <div class="content">
                          博客登录
           </div>
         </h2>
						<form class="ui large form" method="post" action="#" th:action="@{/login}">
							<div class="ui  segment">
								<div class="field">
									<div class="ui left icon input">
										<i class="user icon"></i>
										<input type="text" name="username" placeholder="用户名">
									</div>
								</div>
								<div class="field">
									<div class="ui left icon input">
										<i class="lock icon"></i>
										<input type="password" name="password" placeholder="密码">
									</div>
								</div>
								<div class="field">
									<div class="ui left input">
										<input type="text" name="verifyCodeActual"  placeholder="验证码">&nbsp;&nbsp;&nbsp;&nbsp;
										<img id="captcha_img" alt="点击更换" title="点击更换"
											 onclick="refresh()" src="/kaptcha" />
									</div>
								</div>
								<div class="field">
									<div class="two fields">
										<div class="field" style="text-align: left">
											<a href="#" th:href="@{/register}">新用户注册</a>
										</div>
										<div class="field" style="text-align: right">
											<a href="#" th:href="@{/register}">忘记密码</a>
										</div>
									</div>

								</div>
								<button class="ui fluid large teal submit button">登   录</button>
							</div>

							<div class="ui error mini message"></div>
							<div class="ui mini negative message" th:unless="${#strings.isEmpty(message)}" th:text="${message}">用户名和密码错误</div>

						</form>

					</div>
				</div>
			</div>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/jquery@3.2/dist/jquery.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>

		<script>
			$('.ui.form').form({
				fields: {
					username: {
						identifier: 'username',
						rules: [{
							type: 'empty',
							prompt: '请输入用户名'
						}]
					},
					password: {
						identifier: 'password',
						rules: [{
							type: 'empty',
							prompt: '请输入密码'
						}]
					},
					verifyCodeActual: {
						identifier: 'verifyCodeActual',
						rules: [{
							type: 'empty',
							prompt: '请输入验证码'
						}]
					}
				}
			});

			//刷新验证码
			function refresh() {
				document.getElementById('captcha_img').src="/kaptcha?"+Math.random();
			}
		</script>
	</body>

</html>